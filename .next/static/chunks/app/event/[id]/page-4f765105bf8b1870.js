(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[697],{63:(e,t,r)=>{"use strict";var a=r(7260);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},1169:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1873:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2697:(e,t,r)=>{Promise.resolve().then(r.bind(r,6616))},3941:(e,t,r)=>{"use strict";r.d(t,{$:()=>o,N:()=>i});var a=r(6347),n=r(5704);let s=n.env.NEXT_PUBLIC_SUPABASE_URL,l=n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;s&&l||console.warn("Supabase credentials not found. Using mock services.");let i=s&&l?(0,a.UU)(s,l):null,o=!!i},5016:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(2821),n=r(5889);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}},5626:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6485:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6616:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(5155),n=r(2115),s=r(2025),l=r(5626),i=r(1847);let o=(0,i.A)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),u=(0,i.A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var d=r(6485),c=r(1873),h=r(1169),m=r(2619),v=r.n(m),g=r(63),x=r(7135),p=r(7003);function f(){let e=(0,g.useParams)(),t=(0,g.useRouter)(),[r,i]=(0,n.useState)(null),[m,f]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{(async()=>{if(null==e?void 0:e.id){let{event:t,error:r}=await x.gy.getEventById(e.id);r?console.error("Error loading event:",r):i(t),f(!1)}})()},[null==e?void 0:e.id]),m)?(0,a.jsx)("div",{className:"min-h-screen bg-[#111] text-white flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-pulse text-gray-500",children:"Loading event..."})}):r?(0,a.jsxs)("div",{className:"min-h-screen bg-[#111] text-white",children:[(0,a.jsxs)("div",{className:"fixed top-0 left-0 right-0 h-16 bg-[#111]/80 backdrop-blur-md border-b border-white/5 flex items-center justify-between px-6 z-40",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(v(),{href:"/events",className:"p-2 hover:bg-white/5 rounded-full transition-colors",children:(0,a.jsx)(l.A,{className:"w-5 h-5 text-gray-400"})}),(0,a.jsx)("span",{className:"font-medium text-white truncate max-w-xs",children:r.title})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(s.P.button,{className:"p-2 hover:bg-white/5 rounded-full transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,a.jsx)(o,{className:"w-5 h-5 text-gray-400"})}),(0,a.jsx)(s.P.button,{className:"p-2 hover:bg-white/5 rounded-full transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,a.jsx)(u,{className:"w-5 h-5 text-gray-400"})})]})]}),(0,a.jsx)("div",{className:"pt-24 pb-20 px-4 md:px-8 max-w-4xl mx-auto",children:(0,a.jsxs)(s.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsx)("div",{className:"aspect-video rounded-2xl bg-teal-600 mb-8 overflow-hidden relative",children:r.cover_image_url?(0,a.jsx)("img",{src:r.cover_image_url,alt:r.title,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-6xl",children:"\uD83D\uDCC5"})})}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-white mb-4",children:r.title}),r.description&&(0,a.jsx)("p",{className:"text-gray-400 mb-6",children:r.description}),(0,a.jsx)("div",{className:"bg-[#1a1a1a] border border-white/5 rounded-xl p-4 mb-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.A,{className:"w-5 h-5 text-teal-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-medium",children:new Date(r.start_date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),(0,a.jsxs)("p",{className:"text-gray-500 text-sm",children:[new Date(r.start_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),r.end_date&&" - ".concat(new Date(r.end_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))]})]})]})}),(0,a.jsx)("div",{className:"bg-[#1a1a1a] border border-white/5 rounded-xl p-4 mb-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(c.A,{className:"w-5 h-5 text-teal-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-medium",children:"virtual"===r.location_type?"Virtual Event":r.location_url||"Location TBD"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"virtual"===r.location_type?"Online":r.location_type})]})]})}),r.capacity&&(0,a.jsx)("div",{className:"bg-[#1a1a1a] border border-white/5 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 text-teal-400"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-white font-medium",children:[r.capacity," spots"]}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Event capacity"})]})]})})]}),(0,a.jsx)("div",{className:"w-full md:w-80",children:(0,a.jsxs)("div",{className:"bg-[#1a1a1a] border border-white/5 rounded-xl p-6 sticky top-24",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-white mb-1",children:r.price?r.price:"Free"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"public"===r.visibility?"Public Event":"Private Event"})]}),(0,a.jsx)(p.$,{className:"w-full bg-teal-500 hover:bg-teal-600 text-white font-bold rounded-xl h-12 mb-3",children:"Register"}),(0,a.jsx)(p.$,{variant:"ghost",className:"w-full border border-white/10 text-gray-400 hover:text-white rounded-xl h-12",onClick:()=>t.push("/events"),children:"Back to Events"})]})})]})]})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-[#111] text-white flex flex-col items-center justify-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Event not found"}),(0,a.jsx)(p.$,{onClick:()=>t.push("/events"),children:"Back to Events"})]})}},7003:(e,t,r)=>{"use strict";r.d(t,{$:()=>u});var a=r(5155),n=r(2115),s=r(6673),l=r(3101),i=r(5016);let o=(0,l.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-gray-90 text-white hover:bg-gray-80 dark:bg-white dark:text-gray-100 dark:hover:bg-gray-20",light:"bg-black/[0.04] text-black/[0.64] hover:bg-black/[0.64] hover:text-white dark:bg-white/[0.08] dark:text-white/[0.64] dark:hover:bg-white/[0.64] dark:hover:text-gray-100",brand:"bg-cranberry text-white hover:bg-[#d5176d]",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-sm",lg:"h-12 rounded-md px-6 text-lg",icon:"h-10 w-10"},rounded:{default:"rounded-md",full:"rounded-full"}},defaultVariants:{variant:"default",size:"default",rounded:"default"}}),u=n.forwardRef((e,t)=>{let{className:r,variant:n,size:l,rounded:u,asChild:d=!1,...c}=e,h=d?s.DX:"button";return(0,a.jsx)(h,{className:(0,i.cn)(o({variant:n,size:l,rounded:u,className:r})),ref:t,...c})});u.displayName="Button"},7135:(e,t,r)=>{"use strict";r.d(t,{y1:()=>m,gy:()=>v,Lh:()=>g});let a="blend_auth_user";class n{async signIn(e){await new Promise(e=>setTimeout(e,500));let t=JSON.parse(localStorage.getItem("blend_users")||"[]"),r=t.find(t=>t.email===e);if(r)return localStorage.setItem(a,JSON.stringify(r)),{user:r,error:null};{let r={id:crypto.randomUUID(),email:e,name:e.split("@")[0],created_at:new Date().toISOString(),avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(e)};return t.push(r),localStorage.setItem("blend_users",JSON.stringify(t)),localStorage.setItem(a,JSON.stringify(r)),{user:r,error:null}}}async signUp(e,t){await new Promise(e=>setTimeout(e,500));let r=JSON.parse(localStorage.getItem("blend_users")||"[]");if(r.find(t=>t.email===e))return{user:null,error:"User already exists"};let n={id:crypto.randomUUID(),email:e,name:t||e.split("@")[0],created_at:new Date().toISOString(),avatar_url:"https://api.dicebear.com/7.x/avataaars/svg?seed=".concat(e)};return r.push(n),localStorage.setItem("blend_users",JSON.stringify(r)),localStorage.setItem(a,JSON.stringify(n)),{user:n,error:null}}async signOut(){return localStorage.removeItem(a),{error:null}}async getCurrentUser(){let e=localStorage.getItem(a);return e?{user:JSON.parse(e),error:null}:{user:null,error:null}}}let s="blend_events";class l{getStoredEvents(){return JSON.parse(localStorage.getItem(s)||"[]")}getCurrentUserId(){let e=localStorage.getItem("blend_auth_user");return e?JSON.parse(e).id:null}async createEvent(e){await new Promise(e=>setTimeout(e,600));let t=this.getCurrentUserId();if(!t)return{event:null,error:"Unauthorized"};let r={id:crypto.randomUUID(),host_id:t,created_at:new Date().toISOString(),...e},a=this.getStoredEvents();return a.push(r),localStorage.setItem(s,JSON.stringify(a)),{event:r,error:null}}async getEvents(e){await new Promise(e=>setTimeout(e,400));let t=this.getStoredEvents(),r=(null==e?void 0:e.host_id)||this.getCurrentUserId();return r?{events:t.filter(e=>e.host_id===r).sort((e,t)=>new Date(e.start_date).getTime()-new Date(t.start_date).getTime()),error:null}:{events:t.filter(e=>"public"===e.visibility),error:null}}async getEventById(e){await new Promise(e=>setTimeout(e,300));let t=this.getStoredEvents().find(t=>t.id===e);return{event:t||null,error:t?null:"Event not found"}}async updateEvent(e,t){await new Promise(e=>setTimeout(e,500));let r=this.getStoredEvents(),a=r.findIndex(t=>t.id===e);if(-1===a)return{event:null,error:"Event not found"};let n=this.getCurrentUserId();if(r[a].host_id!==n)return{event:null,error:"Unauthorized"};let l={...r[a],...t};return r[a]=l,localStorage.setItem(s,JSON.stringify(r)),{event:l,error:null}}async getEventBySlug(e){await new Promise(e=>setTimeout(e,300));let t=this.getStoredEvents().find(t=>t.slug===e);return{event:t||null,error:t?null:"Event not found"}}async deleteEvent(e){await new Promise(e=>setTimeout(e,500));let t=this.getStoredEvents(),r=t.findIndex(t=>t.id===e);if(-1===r)return{error:"Event not found"};let a=this.getCurrentUserId();return t[r].host_id!==a?{error:"Unauthorized"}:(t.splice(r,1),localStorage.setItem(s,JSON.stringify(t)),{error:null})}async publishEvent(e){return this.updateEvent(e,{status:"published",published_at:new Date().toISOString()})}async cancelEvent(e){return this.updateEvent(e,{status:"cancelled"})}}var i=r(3941);let o="blend_auth_user";class u{async signIn(e){if(!i.N)return{user:null,error:"Supabase not configured"};let t="".concat(window.location.origin,"/events"),{error:r}=await i.N.auth.signInWithOtp({email:e,options:{emailRedirectTo:t}});return r?{user:null,error:r.message}:{user:null,error:null}}async signInWithGoogle(){if(!i.N)return{error:"Supabase not configured"};let e="".concat(window.location.origin,"/events"),{error:t}=await i.N.auth.signInWithOAuth({provider:"google",options:{redirectTo:e,queryParams:{access_type:"offline",prompt:"consent"}}});return t?{error:t.message}:{error:null}}async signUp(e,t){return this.signIn(e)}async signOut(){if(!i.N)return localStorage.removeItem(o),{error:null};let{error:e}=await i.N.auth.signOut();return{error:(null==e?void 0:e.message)||null}}async getCurrentUser(){var e,t,r,a,n;if(!i.N){let e=localStorage.getItem(o);return e?{user:JSON.parse(e),error:null}:{user:null,error:null}}let{data:{user:s},error:l}=await i.N.auth.getUser();return l||!s?{user:null,error:(null==l?void 0:l.message)||null}:{user:{id:s.id,email:s.email||"",name:(null==(e=s.user_metadata)?void 0:e.full_name)||(null==(t=s.user_metadata)?void 0:t.name)||(null==(r=s.email)?void 0:r.split("@")[0])||"User",avatar_url:(null==(a=s.user_metadata)?void 0:a.avatar_url)||(null==(n=s.user_metadata)?void 0:n.picture),created_at:s.created_at},error:null}}onAuthStateChange(e){if(!i.N)return()=>{};let{data:{subscription:t}}=i.N.auth.onAuthStateChange(async(t,r)=>{if(null==r?void 0:r.user){var a,n,s,l,i;e({id:r.user.id,email:r.user.email||"",name:(null==(a=r.user.user_metadata)?void 0:a.full_name)||(null==(n=r.user.user_metadata)?void 0:n.name)||(null==(s=r.user.email)?void 0:s.split("@")[0])||"User",avatar_url:(null==(l=r.user.user_metadata)?void 0:l.avatar_url)||(null==(i=r.user.user_metadata)?void 0:i.picture),created_at:r.user.created_at})}else e(null)});return()=>t.unsubscribe()}}let d=i.$;class c{async createEvent(e){if(!i.N)return{event:null,error:"Supabase not configured"};let{data:{user:t}}=await i.N.auth.getUser();if(!t)return{event:null,error:"Not authenticated"};let{data:r,error:a}=await i.N.from("events").insert({host_id:t.id,title:e.title,description:e.description,start_date:e.start_date,end_date:e.end_date,location_type:e.location_type,location_url:e.location_url,cover_image_url:e.cover_image_url,theme:e.theme,capacity:e.capacity,price_cents:e.price?100*parseInt(String(e.price).replace(/[^0-9]/g,"")):0,visibility:e.visibility||"public"}).select().single();return a?{event:null,error:a.message}:{event:r,error:null}}async getEvents(e){if(!i.N)return{events:[],error:"Supabase not configured"};let t=i.N.from("events").select("*"),r=null==e?void 0:e.host_id;if(r)t=t.eq("host_id",r);else{let{data:{user:e}}=await i.N.auth.getUser();t=e?t.eq("host_id",e.id):t.eq("visibility","public")}(null==e?void 0:e.status)&&(t=t.eq("status",e.status)),(null==e?void 0:e.visibility)&&(t=t.eq("visibility",e.visibility)),(null==e?void 0:e.calendar_id)&&(t=t.eq("calendar_id",e.calendar_id));let{data:a,error:n}=await t.order("start_date",{ascending:!0});return n?{events:[],error:n.message}:{events:a||[],error:null}}async getEventById(e){if(!i.N)return{event:null,error:"Supabase not configured"};let{data:t,error:r}=await i.N.from("events").select("*").eq("id",e).single();return r?{event:null,error:r.message}:{event:t,error:null}}async updateEvent(e,t){if(!i.N)return{event:null,error:"Supabase not configured"};let{data:r,error:a}=await i.N.from("events").update(t).eq("id",e).select().single();return a?{event:null,error:a.message}:{event:r,error:null}}async getEventBySlug(e){if(!i.N)return{event:null,error:"Supabase not configured"};let{data:t,error:r}=await i.N.from("events").select("*").eq("slug",e).single();return r?{event:null,error:r.message}:{event:t,error:null}}async deleteEvent(e){if(!i.N)return{error:"Supabase not configured"};let{data:{user:t}}=await i.N.auth.getUser();if(!t)return{error:"Not authenticated"};let{error:r}=await i.N.from("events").delete().eq("id",e).eq("host_id",t.id);return r?{error:r.message}:{error:null}}async publishEvent(e){return this.updateEvent(e,{status:"published",published_at:new Date().toISOString()})}async cancelEvent(e){return this.updateEvent(e,{status:"cancelled"})}}let h=i.$,m=d?new u:new n,v=h?new c:new l,g=d&&h}},e=>{e.O(0,[347,357,441,255,358],()=>e(e.s=2697)),_N_E=e.O()}]);